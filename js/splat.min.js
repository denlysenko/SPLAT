function Slider(a){function b(a){d=-a.value,e.css({marginLeft:d})}function c(a){d=-a.value,e.animate({marginLeft:d,duration:i})}var d,e=a.elem.find(".slider-inner"),f=0,g=(e.children().length-4)*$(".slider-item").outerWidth(!0),h=new SliderControl({elem:a.sliderControl,min:f,max:g}),i=a.duration;$(h).on("slide",b).on("sliderclick",c)}function SliderControl(a){function b(a){var b=f.offset(),d=g.offset(),h=a.pageX-b.left;$(document).on("dragstart selectstart",!1),$(document).on("mousemove",function(a){f.addClass("moving"),e=a.pageX-h-d.left,0>e&&(e=0),e>g.width()-f.width()&&(e=g.width()-f.width()),c(Math.round(e/pixelsPerValue))}),$(document).on("mouseup",function(){$(document).off("mousemove mouseup").off("dragstart selectstart",!1),f.removeClass("moving")})}function c(a,b){j=a,f.css("left",j*pixelsPerValue||0),b||$(h).triggerHandler({type:"slide",value:j})}function d(a){var b=a.pageX-g.offset().left-f.width()/2;0>b&&(b=0),b>g.width()-f.width()&&(b=g.width()-f.width()),c(Math.round(b/pixelsPerValue),!0),$(h).triggerHandler({type:"sliderclick",value:j})}var e,f,g=a.elem,h=this,i=a.max||100,j=a.value||0;f=$('<span class="slider-control-handle">').appendTo(g).on("mousedown",f,b),g.on("click",d),pixelsPerValue=(g.width()-f.width())/i,c(j,!0)}function Carousel(a){function b(){if(f(l),0!==r&&0!==s){s--,e(),o.eq(s).addClass("active"),i(o.eq(s));var a=r+p;j.animate({marginLeft:a,duration:n}),r=a,0===r&&g(k)}}function c(){f(k);var a=r-p;r!==-q&&s!==o.length&&(s++,e(),o.eq(s).addClass("active"),i(o.eq(s)),j.animate({marginLeft:a,duration:n}),r=a,r===-q&&g(l))}function d(a){a.preventDefault();var b=$(this).closest("li");if(!b.hasClass("active")){var c=$(this).attr("href");s=+c.slice(7),s>0&&f(k),0===s&&g(k),s<o.length&&f(l),s===o.length-1&&g(l);var d=j.find(c),h=d.position().left,m=r-h;j.animate({marginLeft:m,duration:n}),i(b),r=m,e(),b.addClass("active")}}function e(){o.removeClass("active")}function f(a){a.hasClass("disabled")&&a.removeClass("disabled")}function g(a){a.addClass("disabled")}function h(){var a;return o.each(function(){return a=$(this).width(),u+=a,a}),u-=m.width(),u=Math.max(a,u)}function i(a){var b=t-a.position().left+m.width()/2-a.outerWidth()/2;b>0&&(b=0),-u>b&&(b=-u),m.find("ul").animate({marginLeft:b,duration:n}),t=b}var j=a.elem.find(".slider-inner"),k=a.leftControl,l=a.rightControl,m=a.tabsControl,n=a.duration,o=m.find("li"),p=j.find(".slider-item").outerWidth(!0),q=(j.find(".slider-item").length-1)*p,r=0,s=0,t=0,u=0;h(),$(window).on("resize",h),m.find("a").each(function(a){$(this).attr("href","#slide_"+a)}),j.find(".slider-item").each(function(a){$(this).attr("id","slide_"+a)}),k.addClass("disabled"),k.on("click",b),l.on("click",c),m.on("click","a",d)}$(function(){new Slider({elem:$(".slider"),sliderControl:$(".slider-control"),duration:1e3}),new Carousel({elem:$(".promo-slider"),leftControl:$(".control-arrows .left"),rightControl:$(".control-arrows .right"),tabsControl:$(".control-tabs"),duration:1e3});var a=$("<div>").css({overflow:"hidden",height:80});$(".control-tabs").wrapAll(a)});